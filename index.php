<?php get_header(); ?>
<link rel="stylesheet" href="/wp-content/themes/tongvatheme/assets/css/leaflet.min.css"/>
<script src="/wp-content/themes/tongvatheme/assets/js/leaflet.min.js"></script>

<script>

  const tongvaLand = {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -118.50128173828125,
                34.02990029603907
              ],
              [
                -118.49853515625,
                34.01168859910852
              ],
              [
                -118.47381591796875,
                33.99347299511967
              ],
              [
                -118.45458984375,
                33.97297577172598
              ],
              [
                -118.443603515625,
                33.947916898356404
              ],
              [
                -118.43261718749999,
                33.92285064485909
              ],
              [
                -118.4051513671875,
                33.87953701355924
              ],
              [
                -118.3941650390625,
                33.8521697014074
              ],
              [
                -118.39141845703125,
                33.82023008524739
              ],
              [
                -118.39141845703125,
                33.80197351806589
              ],
              [
                -118.41613769531249,
                33.78143022380356
              ],
              [
                -118.4051513671875,
                33.74946419232578
              ],
              [
                -118.38043212890625,
                33.742612777346885
              ],
              [
                -118.33923339843749,
                33.7243396617476
              ],
              [
                -118.2843017578125,
                33.708347493688414
              ],
              [
                -118.28155517578125,
                33.71748624018193
              ],
              [
                -118.27606201171874,
                33.742612777346885
              ],
              [
                -118.25408935546875,
                33.72205524868729
              ],
              [
                -118.2403564453125,
                33.72662401401029
              ],
              [
                -118.2403564453125,
                33.742612777346885
              ],
              [
                -118.2403564453125,
                33.75631505992707
              ],
              [
                -118.21014404296875,
                33.754031498216385
              ],
              [
                -118.18817138671875,
                33.73804486328907
              ],
              [
                -118.17718505859375,
                33.76544869849223
              ],
              [
                -118.14971923828124,
                33.763165380096595
              ],
              [
                -118.11126708984375,
                33.75631505992707
              ],
              [
                -118.07830810546875,
                33.72205524868729
              ],
              [
                -118.037109375,
                33.68549637289138
              ],
              [
                -117.97943115234374,
                33.637489243170826
              ],
              [
                -117.9217529296875,
                33.610044573695646
              ],
              [
                -117.86407470703125,
                33.58716733904656
              ],
              [
                -117.850341796875,
                33.5963189611327
              ],
              [
                -117.83111572265625,
                33.637489243170826
              ],
              [
                -117.81188964843751,
                33.687781758439364
              ],
              [
                -117.81463623046875,
                33.71748624018193
              ],
              [
                -117.850341796875,
                33.73804486328907
              ],
              [
                -117.89978027343749,
                33.747180448149855
              ],
              [
                -117.93548583984374,
                33.79056118537381
              ],
              [
                -117.90527343750001,
                33.80197351806589
              ],
              [
                -117.89154052734375,
                33.8362013852728
              ],
              [
                -117.850341796875,
                33.87269600798948
              ],
              [
                -117.8173828125,
                33.904616008362325
              ],
              [
                -117.784423828125,
                33.93652406150093
              ],
              [
                -117.740478515625,
                33.96158628979907
              ],
              [
                -117.69653320312499,
                33.97525348507592
              ],
              [
                -117.6580810546875,
                33.98208625901939
              ],
              [
                -117.62512207031251,
                33.988918483762156
              ],
              [
                -117.59765625,
                34.016241889667015
              ],
              [
                -117.5811767578125,
                34.043556504127444
              ],
              [
                -117.58941650390624,
                34.07996230865873
              ],
              [
                -117.59490966796875,
                34.13908837343849
              ],
              [
                -117.66357421875,
                34.21634468843463
              ],
              [
                -117.69653320312499,
                34.225429015241396
              ],
              [
                -117.7679443359375,
                34.24132422972854
              ],
              [
                -117.84210205078126,
                34.24132422972854
              ],
              [
                -117.894287109375,
                34.264026473152875
              ],
              [
                -117.90802001953125,
                34.27083595165
              ],
              [
                -117.95745849609375,
                34.31848685867645
              ],
              [
                -118.00689697265625,
                34.3207552752374
              ],
              [
                -118.0316162109375,
                34.3207552752374
              ],
              [
                -118.09478759765625,
                34.32302363048832
              ],
              [
                -118.15521240234376,
                34.30033731925641
              ],
              [
                -118.17993164062499,
                34.30033731925641
              ],
              [
                -118.22113037109375,
                34.24586516842103
              ],
              [
                -118.24310302734374,
                34.22315802537976
              ],
              [
                -118.2843017578125,
                34.19590137180652
              ],
              [
                -118.35845947265625,
                34.164090803573124
              ],
              [
                -118.41339111328125,
                34.15954545771158
              ],
              [
                -118.4600830078125,
                34.161818161230386
              ],
              [
                -118.49304199218749,
                34.15499986715356
              ],
              [
                -118.50128173828125,
                34.134541681937364
              ],
              [
                -118.50677490234375,
                34.10043369975709
              ],
              [
                -118.50677490234375,
                34.064036693555465
              ],
              [
                -118.50128173828125,
                34.02990029603907
              ]
            ]
          ]
        }
      }
    ]
  }
  // Additional tile options:
  // https://leaflet-extras.github.io/leaflet-providers/preview/
  // https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.png
  // https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}
  // https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}
  // http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png
  // https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}
  //

  window.document.addEventListener('DOMContentLoaded', () => {
    var map = L.map('map').setView([33.95, -118.243683], 9);
    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      maxZoom: 19,
      attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    console.log(L)

    L.geoJson(tongvaLand, {
      style: {
        "color": "#98d640",
        "weight": 5,
        "opacity": 1
      }
    }).addTo(map);

  });
</script>
<main id="primary" class="site-main" >
    <section id="map"></section>
    <?php

      if ( have_posts() ) :

        ?>
        <div class="container">
          <?php
            if ( is_home() && ! is_front_page() ) :
              echo esc_html( kiyono_frontpage_title());

            elseif ( is_archive() )  :
              echo esc_html( kiyono_archive_title());

            elseif ( is_search() )  :
              echo esc_html( kiyono_search_title());

            endif;
          ?>
        </div>
        <?php

        if ( is_home() && is_front_page() || is_archive() || is_search() ) :

          kiyono_grid_wrapper_start();

        endif;

          /* Start the Loop */
          while ( have_posts() ) :
            the_post();

            if ( is_home() || is_archive() || is_search() ) :

                get_template_part( 'template-parts/content', 'excerpt');

            elseif ( is_page()  || is_front_page()) :

              get_template_part( 'template-parts/content', 'page');

            endif;

          endwhile;

        if ( is_home() && is_front_page() || is_archive() || is_search() ) :

          kiyono_grid_wrapper_end();

        endif;

    ?>
          <div class="w-full">
            <?php kiyono_the_posts_navigation(); ?>
          </div>

    <?php

    else :

      get_template_part( 'template-parts/content', 'none' );

    endif;

    ?>
</main>

<?php get_footer(); ?>